# AI Analytics Module Enhancements

## Обновление от 3 ноября 2025

### Что нового

#### 1. Tooltip для Scenario Analysis Tool
Добавлен информационный тултип с иконкой (ℹ️) к заголовку "Инструмент сценарного анализа" в модуле FX & Currency Risks. 

**Функциональность:**
- Появляется при наведении на иконку информации
- Объясняет как использовать инструмент сценарного анализа
- Доступен на русском и английском языках
- Расположение: `/components/FXRiskAnalysis.tsx`

**Текст тултипа:**
- **RU:** "Моделируйте изменения валютных курсов для прогноза влияния на баланс, налоги и денежный поток. Измените курсы на ±10% чтобы увидеть эффект в реальном времени и планировать хеджирование."
- **EN:** "Simulate currency rate changes to predict impact on your balance, taxes, and cash flow. Adjust rates by ±10% to see real-time effects and plan hedging strategies."

---

#### 2. Расширенный раздел AI Analytics

Добавлена новая мощная секция с AI-инсайтами, которые предоставляют пользователям ценную аналитику за которую они готовы платить.

##### 2.1 Ключевые финансовые метрики

**Burn Rate (Уровень расходов)**
- Показывает ежемесячный уровень расходов
- Визуализация с прогресс-баром
- Информационный тултип объясняющий метрику
- Конвертация в выбранную валюту отображения

**Cash Runway (Денежная взлётная полоса)**
- Расчёт количества месяцев работы при текущем уровне расходов
- Критический показатель для планирования
- Визуальная индикация уровня запаса средств
- Формула: `cashReserves / burnRate`

**Profit Margin (Маржа прибыли)**
- Процент прибыли от выручки
- Сравнение со средними показателями индустрии
- Индикатор выше/ниже среднего по отрасли
- Отраслевой бенчмарк: 15-25%

##### 2.2 Прогнозирование денежного потока

**Cash Flow Prediction**
- AI-прогноз на следующие 3 месяца
- Визуализация фактических и прогнозируемых данных
- Уровень уверенности прогноза (confidence)
- Интерактивный график с Area Chart

**Данные:**
- Декабрь: прогноз с уверенностью 92%
- Январь-Март: снижающаяся уверенность (85% → 70%)
- Различение факта и прогноза через разные стили линий

##### 2.3 Тренды по категориям

**Category Trends Analysis**
- Анализ трендов расходов за последние 3 месяца
- Три типа трендов: растущий, снижающийся, стабильный
- Процент изменения для каждой категории
- Средний месячный расход по категориям

**Категории:**
1. **IT Services** - растёт (+15.3%)
2. **Marketing** - растёт (+8.7%)
3. **Rent** - стабильно (+0.2%)
4. **Utilities** - снижается (-5.1%)

##### 2.4 Обнаружение аномалий

**Detected Anomalies**
- Автоматическое выявление необычных трансакций
- Расчёт процента отклонения от среднего
- Категоризация аномалий (необычный расход, скачок расходов)
- Дата обнаружения и детали транзакции

**Примеры:**
- IT Services: +285% выше среднего (₸12,500)
- Marketing: +45% выше среднего (₸8,900)

##### 2.5 Умные рекомендации

**Smart Recommendations**
- Приоритизированные рекомендации (срочно, высокий, средний)
- Три типа рекомендаций:
  1. **Валютные риски** - диверсификация портфеля
  2. **Налоговые дедлайны** - напоминания о сроках
  3. **Оптимизация расходов** - сокращение подписок

**Функциональность:**
- Кликабельные карточки для детального просмотра
- Цветовая кодировка по приоритету
- Расчёт потенциальной экономии
- Иконки для быстрой идентификации типа

---

### Технические детали

#### Новые компоненты данных
```typescript
// AI-powered insights data
const aiInsights = {
  burnRate: 8800,
  cashReserves: 234000,
  profitMargin: 21.2,
  industryAverage: 18.5,
};

// Cash flow prediction
const cashFlowPrediction = [...];

// Category trends
const categoryTrends = [...];

// Detected anomalies
const detectedAnomalies = [...];

// Smart recommendations
const smartRecommendations = [...];
```

#### Новые иконки (lucide-react)
- `AlertTriangle` - для аномалий и срочных рекомендаций
- `Lightbulb` - для умных рекомендаций
- `Zap` - для AI-инсайтов
- `Target` - для Cash Runway
- `TrendingDown` - для Burn Rate
- `Activity` - для Profit Margin

#### Переводы
Добавлено более 30 новых ключей переводов в `/utils/translations.ts`:
- `ai.insights.*` - заголовки и описания AI-инсайтов
- `ai.burnRate.*` - Burn Rate метрики
- `ai.runway.*` - Cash Runway метрики
- `ai.profitMargin.*` - Profit Margin метрики
- `ai.anomalies.*` - обнаружение аномалий
- `ai.recommendations.*` - умные рекомендации
- `ai.cashFlowPrediction.*` - прогнозирование
- `ai.categoryTrends.*` - тренды категорий

---

### Расположение файлов

**Изменённые файлы:**
1. `/components/DashboardAnalytics.tsx` - добавлена секция AI-инсайтов
2. `/components/FXRiskAnalysis.tsx` - добавлен tooltip к Scenario Analysis Tool
3. `/utils/translations.ts` - добавлены переводы для новых элементов

**Созданные файлы:**
1. `/AI_ANALYTICS_ENHANCEMENTS.md` - эта документация

---

### Визуальный дизайн

**Цветовая схема AI-секции:**
- Фон: градиент от purple-50 через blue-50 к indigo-50
- Рамка: purple-200
- Акценты: фиолетово-синий градиент для AI-бейджа

**Карточки метрик:**
- Burn Rate: красный акцент (опасность расходов)
- Cash Runway: зелёный акцент (позитивный запас)
- Profit Margin: синий акцент (аналитика)

**Интерактивность:**
- Hover-эффекты на карточках
- Кликабельные рекомендации с toast-уведомлениями
- Инф��рмационные тултипы при наведении

---

### Ценность для пользователей

**Почему пользователи готовы платить за эти инсайты:**

1. **Burn Rate & Runway** - критические метрики выживания бизнеса
2. **Profit Margin Benchmarking** - сравнение с конкурентами
3. **Predictive Analytics** - прогнозы на 3 месяца вперёд
4. **Anomaly Detection** - защита от ошибок и мошенничества
5. **Smart Recommendations** - экономия времени и денег
6. **Category Trends** - оптимизация бюджетов по направлениям

**Потенциальная экономия:**
- Оптимизация подписок: до ₸12,500/мес
- Валютные риски: предотвращение потерь до 5-10% баланса
- Налоговые штрафы: избежание пеней за просрочку

---

### Следующие шаги (рекомендации)

1. **Интеграция с реальным AI-движком:**
   - Подключение ML-моделей для прогнозирования
   - Обучение на исторических данных пользователя
   - Персонализация рекомендаций

2. **Расширение аномалий:**
   - Детектирование дубликатов транзакций
   - Выявление подозрительных паттернов
   - Алерты в реальном времени

3. **Улучшение рекомендаций:**
   - A/B тестирование эффективности советов
   - Трекинг выполнения рекомендаций
   - Расчёт фактической экономии

4. **Дополнительные метрики:**
   - Customer Acquisition Cost (CAC)
   - Lifetime Value (LTV)
   - Quick Ratio для SaaS
   - Revenue Growth Rate

5. **Экспорт и отчёты:**
   - PDF-отчёты с инсайтами
   - Email-дайджест еженедельно
   - API для интеграции с другими системами

---

## Использование

### Просмотр AI-инсайтов
1. Откройте Dashboard (раздел "Панель управления")
2. Прокрутите вниз до секции "AI-Powered Insights"
3. Изучите ключевые метрики: Burn Rate, Cash Runway, Profit Margin
4. Проверьте прогноз денежного потока на 3 месяца
5. Просмотрите тренды по категориям расходов
6. Обратите внимание на обнаруженные аномалии
7. Изучите умные рекомендации и кликните для деталей

### Использование Scenario Analysis Tooltip
1. Откройте раздел "FX Control" → "FX & Currency Risks"
2. Прокрутите до секции "Scenario Analysis Tool"
3. Наведите курсор на иконку ℹ️ рядом с заголовком
4. Прочитайте описание как использовать инструмент
5. Настройте курсы валют ползунками ±10%
6. Наблюдайте влияние на баланс, налоги и cash flow в реальном времени

---

## Обратная связь

Если у вас есть предложения по улучшению AI-аналитики или вы обнаружили проблемы, пожалуйста, создайте issue в репозитории проекта.

---

**Версия:** 2.0  
**Дата:** 3 ноября 2025  
**Автор:** FinSplit Development Team
